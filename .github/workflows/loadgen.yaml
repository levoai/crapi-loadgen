name: Generate Load on crAPI
on:
  schedule:
    - cron: '*/15 * * * *'
  workflow_dispatch:

jobs:
  loadgen:
    runs-on: ubuntu-latest
    steps:
      - uses: levoai/actions/test-plan@main
        with:
          plan: "continuous_testing_levo_ai:ws/continuous_testing:app/crapi_loadgen:tp/crapi_loadgen"
          base64_env: ${{ secrets.CRAPI_ENV_BASE64 }}
          authorization-key: ${{ secrets.LEVO_CLI_AUTH_KEY }}
          organization-id: ${{ secrets.LEVO_CI_ORGANIZATION_ID }}
          target: http://crapi.levo.ai
          fail-on-failed-tests: false
          saas-url: https://api.dev.levo.ai
          report: false
          cli_extra_args: "-v INFO"
